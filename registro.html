<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitnessPlus - Registro</title>
    
    <!-- Estilos externos -->
    <link rel="stylesheet" href="./registro.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=League+Gothic:wght@400&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Abel:wght@400&display=swap">
    <script language="javascript" type="text/javascript">
        window.onload = function() {
    const form = document.querySelector("form#registro");
    form.onsubmit = async (event) => {
        event.preventDefault();

        // Crear el FormData del formulario
        const formdata = new FormData(form);

        // Realizar la solicitud al servidor
        try {
            const req = await fetch("http://paginagym.fwh.is/Fitnessplus-website-code/php/registro.php", {
                method: "POST",
                body: formdata // Envía el FormData en lugar de JSON
            });
            
            const res = await req.json(); // Interpretar la respuesta como JSON
            console.log(res);

            if (res.success) { 
                window.location.href = "/Fitnessplus-website-code/aviso_registro_exitoso.html";
            } else {
                alert("Error: " + (res.message || "No se pudo completar el registro."));
            }
        } catch (error) {
            console.error("Error en el envío del formulario:", error);
            alert("Ocurrió un error al procesar el formulario.");
        }
    };
};
</script>

</head>
<body>
    
    <!-- Encabezado con logo y botones de navegación -->
    <header>
        <img class="logo-icon" src="img/Logo.svg" alt="Logo de FitnessPlus">
        
        <div class="botones-header">
            <a href="iniciar_sesión.html" class="botn-sencillo-iniciar-sesi">
                <div class="iniciar-sesion">Iniciar Sesión</div>
            </a>
            <a href="registro.html" class="botn-sencillo-registrar">
                <div class="iniciar-sesion">Registrar</div>
            </a>
        </div>
    </header>
    
    <!-- Sección de creación de cuenta -->
    <div class="lista-de-datos">
        <div class="crear-cuenta">
            <a href="index.html">
                <img class="vector-icon" src="img/Atras.svg" alt="Regresar">
            </a>
            <div class="titulo-seccion">CREAR CUENTA</div>
        </div>
        
        <form class="lista-de-contenido-datos"  id="registro">
            <label class="campo">
                <input type="text" name="nombre" placeholder="Nombre" required>
            </label>
            
            <label class="campo">
                <input type="text" name="apellido" placeholder="Apellido" required>
            </label>
            
            <label class="campo">
                <input type="date" name="fecha_nacimiento" placeholder="Fecha de Nacimiento" required>
            </label>
            
            <label class="ciudad">
                <select class="desplegable" name="tipodocumento"> 
                    <option value="" disabled selected>Tipo de Documento</option>
                    <option value="CC">Cédula de Ciudadanía (CC)</option>
                    <option value="TI">Tarjeta de Identidad (TI)</option>
                    <option value="RC">Registro Civil (RC)</option>
                    <option value="CE">Cédula de Extranjería (CE)</option>
                </select>
            </label>
            
            <label class="campo">
                <input type="text" name="numero_documento" placeholder="Número de Documento" required>
            </label>
            
            <label class="campo">
                <input type="tel" name="telefono" placeholder="Teléfono" required>
            </label>
            
            <label class="ciudad">
                <select class="desplegable" name="ciudad">
                    <option value="" disabled selected>Ciudad</option>
                    <option value="Ciudad X">Ciudad X</option>
                    <option value="Ciudad Y">Ciudad Y</option>
                    <!-- Añadir más opciones de ciudad según sea necesario -->
                </select>
            </label>
            
            <label class="campo">
                <input type="text" name="direccion" placeholder="Dirección" required>
            </label>
            
            <label class="campo">
                <input type="email" name="correo" placeholder="Correo" required>
            </label>
            
            <label class="campo">
                <input type="password" name="contrasena" placeholder="Contraseña" required>
            </label>
            
            <label class="ciudad">
                <select class="desplegable" name="rol">
                    <option value="" disabled selected>Rol</option>
                    <option value="Usuario">Usuario</option>
                    <option value="Entrenador">Entrenador</option>
                    <!-- Si hay más roles, agregar aquí -->
                </select>
            </label>
            
                <label class="casilla-datos">
                    <input type="file" id="FOTO" name="foto">
                </label>

            <button type="submit" class="botn-sencillo" >Registrarse</button>
        </form>
    </div>

</body>
</html>
